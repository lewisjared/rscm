Split `state.rs` into a module directory with focused submodules for improved maintainability.
